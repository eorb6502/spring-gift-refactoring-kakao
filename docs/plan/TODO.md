# 개발 계획

> REQUIREMENT.md 기반 작업 순서. 모든 단계는 **구조 변경만** 수행하며 작동을 변경하지 않는다.
> 각 단계 완료 후 전체 테스트를 통과해야 다음 단계로 넘어간다.

## 0단계: 준비

1. README.md에 구현할 기능 목록과 구현 전략 정리
2. 전체 테스트 실행하여 현재 상태가 Green인지 확인
3. AI 도구 활용 계획이 있다면 PROMPT.md에 프롬프트 내용 방식 기록 준비

- [ ] README.md 기능 목록 작성
- [ ] README.md 구현 전략 정리
- [ ] 전체 테스트 Green 확인

> **규칙**: README.md 체크리스트에 다음 작업이 적혀 있어야 코드 수정을 시작한다.

---

## 1단계: 스타일 정리 (구조 변경, 작동 변경 없음)

프로젝트 전반의 스타일 불일치를 찾아 일관되게 정리한다.

### 작업 절차

1. 스타일 불일치 항목을 먼저 **목록으로 정리**한다 (바로 고치지 않는다)
2. 항목별로 **한 번에 한 조각씩** 수정한다
3. 수정할 때마다 **작동이 바뀌지 않았는지** 확인한다 (전체 테스트 실행)
4. 커밋은 **목적 1개** 단위로 한다 (git diff를 보고 30초 안에 설명 가능해야 함)

### 체크리스트

- [ ] 코드 포맷팅 통일 (들여쓰기, 빈 줄, 중괄호 스타일 등)
- [ ] import 정리 (미사용 import 제거, 순서 통일)
- [ ] 네이밍 컨벤션 점검 (메서드명, 변수명 일관성)
- [ ] 전체 테스트 통과 확인

---

## 2단계: 불필요한 코드 제거 (구조 변경, 작동 변경 없음)

### 작업 절차

1. IDE 또는 정적 분석 도구로 **"미사용" 항목을 식별**한다
2. 삭제 후보마다 아래 **3가지 근거를 반드시 확인**한 뒤 삭제 여부를 결정한다:
   - 주변 주석 또는 TODO에 **의도가 있는가?**
   - `git blame`으로 **누가, 왜 추가했는가?**
   - 이후 단계(서비스 계층 추출)와 **충돌하지 않는가?**
3. 근거가 확인된 항목만 **한 번에 하나씩** 제거한다
4. 제거할 때마다 전체 테스트를 실행하여 **작동 변경이 없는지** 확인한다

### 체크리스트

- [ ] 미사용 필드, 메서드, 클래스 식별
- [ ] 각 항목별 삭제 근거 확인 (주석/TODO, git blame, 이후 단계 충돌)
- [ ] 근거 확인된 항목 제거
- [ ] 미사용 의존성 확인 (build.gradle.kts)
- [ ] 불필요한 주석 정리
- [ ] 전체 테스트 통과 확인

---

## 3단계: 서비스 계층 추출 (구조 변경, 작동 변경 없음)

### 작업 절차 (도메인마다 동일하게 반복)

1. Controller의 비즈니스 로직을 **식별**한다 (요청 검증/위임이 아닌 것)
2. Service 클래스를 **생성**한다
3. 비즈니스 로직을 Service로 **이동**한다 (이 단계에서 신규 기능을 추가하지 않는다)
4. Controller는 **요청 검증과 위임만** 담당하도록 변경한다
5. 전체 테스트를 실행하여 **기존 작동이 유지되는지** 확인한다
6. git diff를 보고 **30초 안에 커밋 의도를 설명할 수 있는지** 검증한다
7. 설명 불가능하면 커밋을 **더 쪼갠다**

> **규칙**: 한 번에 하나의 도메인만 작업한다. 의존 관계가 적은 것부터 시작한다.

### 3-1. CategoryService 추출

- [ ] CategoryController 비즈니스 로직 식별
- [ ] CategoryService 생성 및 로직 이동
- [ ] CategoryController → 요청 검증 + 위임만 남기기
- [ ] 전체 테스트 통과 확인

### 3-2. ProductService 추출

- [ ] ProductController 비즈니스 로직 식별
- [ ] ProductService 생성 및 로직 이동
- [ ] ProductController → 요청 검증 + 위임만 남기기
- [ ] AdminProductController → ProductService 위임으로 변경
- [ ] 전체 테스트 통과 확인

### 3-3. OptionService 추출

- [ ] OptionController 비즈니스 로직 식별
- [ ] OptionService 생성 및 로직 이동
- [ ] OptionController → 요청 검증 + 위임만 남기기
- [ ] 전체 테스트 통과 확인

### 3-4. MemberService 추출

- [ ] MemberController 비즈니스 로직 식별
- [ ] MemberService 생성 및 로직 이동
- [ ] MemberController → 요청 검증 + 위임만 남기기
- [ ] 전체 테스트 통과 확인

### 3-5. WishService 추출

- [ ] WishController 비즈니스 로직 식별
- [ ] WishService 생성 및 로직 이동
- [ ] WishController → 요청 검증 + 위임만 남기기
- [ ] 전체 테스트 통과 확인

### 3-6. OrderService 추출

- [ ] OrderController 비즈니스 로직 식별 (주문 플로우: 인증 → 검증 → 재고 차감 → 포인트 차감 → 저장 → 위시 정리 → 카카오 메시지)
- [ ] OrderService 생성 및 로직 이동
- [ ] OrderController → 요청 검증 + 위임만 남기기
- [ ] 전체 테스트 통과 확인

---

## 모든 단계 공통 규칙 (프로그래밍 요구 사항)

| 규칙 | 설명 |
|------|------|
| **README.md 먼저** | 코드 수정 전 README.md 체크리스트에 다음 작업이 적혀 있어야 한다 |
| **한 번에 한 조각** | "다음 변경 1개"처럼 범위를 제한한다 |
| **구조/작동 분리** | 한 커밋에 구조 변경과 작동 변경을 섞지 않는다 |
| **TDD 루프** | 변경 후 전체 테스트 통과가 최소 요구 사항이다 |
| **커밋 = 목적 1개** | git diff를 보고 30초 안에 설명할 수 없으면 더 쪼갠다 |
| **AI 산출물 검증** | AI는 초안을 만들 뿐, 의도하지 않은 변경이 없는지 반드시 확인한다 |
| **AI 활용 기록** | AI 도구를 활용했다면 README.md에 활용 방식, 수정 내용, 학습 내용을 기록한다 |
